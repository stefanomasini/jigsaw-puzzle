(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(43)},29:function(e,t,n){},40:function(e,t){},43:function(e,t,n){"use strict";n.r(t);n(23);var a=n(1),r=n.n(a),o=n(5),c=n.n(o),i=(n(29),n(10)),s=n.n(i),h=n(21),l=n(6),u=n(7),d=n(12),m=n(11),g=n(13),p=n(3),v=n(14),f=n.n(v),b=s.a.mark(C),w=s.a.mark(D),k={width:297,height:210,pieces:100,gap:.2},y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state=Object(h.a)({rngSeed:"puzzle 1",showControlPoints:!1,mode:"puzzle"},k),n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container",style:{marginTop:20}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h2",null,"Jigsaw Puzzle Generator"),r.a.createElement("p",null,"Code available in ",r.a.createElement("a",{href:"https://github.com/stefanomasini/jigsaw-puzzle"},"GitHub")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},"puzzle"===this.state.mode&&r.a.createElement("div",null,r.a.createElement(x,{rngSeed:this.state.rngSeed,showControlPoints:this.state.showControlPoints,width:this.state.width,height:this.state.height,pieces:this.state.pieces,gap:this.state.gap}),r.a.createElement(p.a,{onClick:function(){return function(e){var t=e.width,n=e.height,a=e.pieces,r=e.rngSeed,o=e.gap,c=S(t,n,o,a),i=Array.from(C(c,r)).map(function(e){return e.toSvgPath()}).join("   ");!function(e,t,n){var a=document.createElement("a");a.setAttribute("href","data:".concat(n,";charset=utf-8,").concat(encodeURIComponent(t))),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("puzzle.svg","".concat(E,'\n                   <svg version="1.0" id="Layer_1" xmlns="http://www.w3.org/2000/svg" \n                        xmlns:xlink="http://www.w3.org/1999/xlink" x="0mm" y="0mm" width="').concat(t,'mm" height="').concat(n,'mm" \n                        viewBox="0 0 ').concat(t," ").concat(n,'" \n                        enable-background="new 0 0 ').concat(t," ").concat(n,'" \n                        xml:space="preserve">\n                       <path d="').concat(i,'" fill="none" stroke="#000000" stroke-width="0.05pt"/> \n                   </svg>'),"image/svg+xml")}(e.state)}},"Download SVG")),"algorithm"===this.state.mode&&r.a.createElement(_,{rngSeed:this.state.rngSeed,showControlPoints:this.state.showControlPoints})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(p.b,null,r.a.createElement(p.c,null,r.a.createElement(p.e,{for:"rngSeed"},"Seed for random number generation"),r.a.createElement(p.d,{type:"text",name:"rngSeed",id:"rngSeed",value:this.state.rngSeed,onChange:function(t){e.setState({rngSeed:t.target.value})}})),r.a.createElement(p.c,{tag:"fieldset"},r.a.createElement("legend",null,"Mode"),r.a.createElement(p.c,{check:!0},r.a.createElement(p.e,{check:!0},r.a.createElement(p.d,{type:"radio",name:"radio_puzzle",checked:"puzzle"===this.state.mode,onChange:function(){e.setState({mode:"puzzle",showControlPoints:!1})}})," ","Puzzle generation")),r.a.createElement(p.c,{check:!0},r.a.createElement(p.e,{check:!0},r.a.createElement(p.d,{type:"radio",name:"radio_tuning",checked:"algorithm"===this.state.mode,onChange:function(){e.setState({mode:"algorithm"})}})," ","Algorithm tuning"))),r.a.createElement(p.c,null,r.a.createElement(p.e,{for:"pieces"},"Uncut gap between pieces (mm)"),r.a.createElement(p.d,{type:"text",name:"gap",id:"gap",value:this.state.gap,onChange:function(t){e.setState({gap:parseFloat(t.target.value)})}})),"puzzle"===this.state.mode&&r.a.createElement("div",null,r.a.createElement(p.c,null,r.a.createElement(p.e,{for:"width"},"Size (mm)"),r.a.createElement(p.d,{type:"text",name:"width",id:"width",value:this.state.width,onChange:function(t){e.setState({width:parseInt(t.target.value)})}}),r.a.createElement(p.d,{type:"text",name:"height",id:"height",value:this.state.height,onChange:function(t){e.setState({height:parseInt(t.target.value)})}})),r.a.createElement(p.c,null,r.a.createElement(p.e,{for:"pieces"},"Desired number of pieces"),r.a.createElement(p.d,{type:"text",name:"pieces",id:"pieces",value:this.state.pieces,onChange:function(t){e.setState({pieces:parseInt(t.target.value)})}}))),"algorithm"===this.state.mode&&r.a.createElement(p.c,{check:!0},r.a.createElement(p.e,{check:!0},r.a.createElement(p.d,{type:"checkbox",checked:this.state.showControlPoints,onChange:function(){e.setState({showControlPoints:!e.state.showControlPoints})}})," ","Show control points")),r.a.createElement(p.a,null,"Submit")))))}}]),t}(a.Component),x=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.width,n=this.props.height;if(0===t||0===n)return null;var a=500/t*n,o=U(n,a),c=S(t,n,this.props.gap,this.props.pieces),i=Array.from(C(c,this.props.rngSeed));return r.a.createElement("div",null,r.a.createElement("svg",{width:500,height:a,style:{border:"0"}},i.map(function(t,n){return t.toSvg(n,o,e.props.showControlPoints)})),r.a.createElement("p",{style:{marginTop:10}},c.numRows," x ",c.numCols," = ",r.a.createElement("b",null,c.actualNumPieces," actual pieces")))}}]),t}(a.Component),_=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=U(1,500),n=f()(this.props.rngSeed),a=Array.from(M(n));return r.a.createElement("svg",{width:500,height:500,style:{border:"1px solid black"}},a.map(function(n,a){return n.toSvg(a,t,e.props.showControlPoints)}))}}]),t}(a.Component),E='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">\n';function S(e,t,n,a){var r=Math.sqrt(e*t/a),o=Math.round(e/r),c=e/o,i=Math.round(t/r);return{model_width:e,model_height:t,numCols:o,block_width:c,numRows:i,block_height:t/i,actualNumPieces:i*o,gapPercentageInBlock:n/c}}function C(e,t){var n,a,r,o,c,i,h,l,u,d,m,g,p,v,w,k,y,x,_,E,S,C,z,P,L,N,D,I;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=e.numRows,a=e.numCols,r=e.block_width,o=e.block_height,c=e.model_width,i=e.model_height,h=e.gapPercentageInBlock,l=f()(t),s.next=4,new R(0,0,c,i);case 4:u=1;case 5:if(!(u<n)){s.next=42;break}d=0;case 7:if(!(d<a)){s.next=39;break}m=l()>.5,g=J(r*d,o*u,r,o,j,m),p=!0,v=!1,w=void 0,s.prev=13,k=M(l,h)[Symbol.iterator]();case 15:if(p=(y=k.next()).done){s.next=22;break}return x=y.value,s.next=19,x.transform(g);case 19:p=!0,s.next=15;break;case 22:s.next=28;break;case 24:s.prev=24,s.t0=s.catch(13),v=!0,w=s.t0;case 28:s.prev=28,s.prev=29,p||null==k.return||k.return();case 31:if(s.prev=31,!v){s.next=34;break}throw w;case 34:return s.finish(31);case 35:return s.finish(28);case 36:d+=1,s.next=7;break;case 39:u+=1,s.next=5;break;case 42:_=1;case 43:if(!(_<a)){s.next=80;break}E=0;case 45:if(!(E<n)){s.next=77;break}S=l()>.5,C=J(r*_,o*E,r,o,O,S),z=!0,P=!1,L=void 0,s.prev=51,N=M(l,h)[Symbol.iterator]();case 53:if(z=(D=N.next()).done){s.next=60;break}return I=D.value,s.next=57,I.transform(C);case 57:z=!0,s.next=53;break;case 60:s.next=66;break;case 62:s.prev=62,s.t1=s.catch(51),P=!0,L=s.t1;case 66:s.prev=66,s.prev=67,z||null==N.return||N.return();case 69:if(s.prev=69,!P){s.next=72;break}throw L;case 72:return s.finish(69);case 73:return s.finish(66);case 74:E+=1,s.next=45;break;case 77:_+=1,s.next=43;break;case 80:case"end":return s.stop()}},b,this,[[13,24,28,36],[29,,31,35],[51,62,66,74],[67,,69,73]])}var j="h",O="v",z={base_height:P(.1,.03),tooth_base_middle:P(.5,.08),tooth_neck_width:P(.2,.04),tooth_left_width:P(.15,.03),tooth_right_width:P(.15,.03),tooth_height:P(.18,.04)};function P(e,t){return{value:e,variability:t}}function M(e,t){var n,a,r=function(e,t){for(var n={},a=Object.keys(e),r=0;r<a.length;r++){var o=a[r];n[o]=e[o].value+(2*t()-1)*e[o].variability}return n}(z,e),o=r.tooth_base_middle-r.tooth_neck_width/2,c=1-o-r.tooth_neck_width,i=r.tooth_base_middle-r.tooth_left_width,s=1-i-r.tooth_left_width-r.tooth_right_width,h=r.base_height+r.tooth_height,l=r.base_height+3*r.tooth_height/5,u=l-r.base_height,d=h-l;return D((n=L(t,0),a=L(1,0),{point:n,direction:a,length_after:o/2}),A(L(o,r.base_height),L(0,1),2*r.base_height/3,u/2),A(L(i,l),L(0,1),u/2,d/2),A(L(r.tooth_base_middle,h),L(1,0),r.tooth_left_width/2,r.tooth_right_width/2),A(L(1-s,l),L(0,-1),d/2,u/2),A(L(1-c,r.base_height),L(0,-1),u/2,2*r.base_height/3),function(e,t,n){return{point:e,direction:t,length_before:n}}(L(1-t,0),L(1,0),c/2))}function L(e,t){return new N(e,t)}var N=function(){function e(t,n){Object(l.a)(this,e),this.x=t,this.y=n}return Object(u.a)(e,[{key:"toSvg",value:function(){return"".concat(this.x," ").concat(this.y)}}]),e}();function D(e){var t,n,a,r,o,c,i=arguments;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:for(t=e,n=i.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=i[r];o=0;case 3:if(!(o<a.length)){s.next=11;break}return c=a[o],s.next=7,new T(t.point,I(t.point,t.direction,t.length_after),I(c.point,c.direction,-c.length_before),c.point);case 7:t=c;case 8:o++,s.next=3;break;case 11:case"end":return s.stop()}},w,this)}function I(e,t,n){var a=n/Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return L(e.x+t.x*a,e.y+t.y*a)}function A(e,t,n,a){return{point:e,direction:t,length_before:n,length_after:a}}var R=function(){function e(t,n,a,r){Object(l.a)(this,e),this.a=L(t,n),this.b=L(t+a,n),this.c=L(t+a,n+r),this.d=L(t,n+r)}return Object(u.a)(e,[{key:"toSvgPath",value:function(){var e=this.a,t=this.b,n=this.c,a=this.d;return"M ".concat(e.toSvg()," L ").concat(t.toSvg()," L ").concat(n.toSvg()," L ").concat(a.toSvg()," Z")}},{key:"toSvg",value:function(e,t,n){var a=this.a,o=this.b,c=this.c,i=this.d;return a=t(a),o=t(o),c=t(c),i=t(i),r.a.createElement("path",{key:e,d:"M ".concat(a.toSvg()," L ").concat(o.toSvg()," L ").concat(c.toSvg()," L ").concat(i.toSvg()," Z"),fill:"none",stroke:"black"})}}]),e}(),T=function(){function e(t,n,a,r){Object(l.a)(this,e),this.a=t,this.ca=n,this.cb=a,this.b=r}return Object(u.a)(e,[{key:"transform",value:function(t){return new e(t(this.a),t(this.ca),t(this.cb),t(this.b))}},{key:"toSvgPath",value:function(){var e=this.a,t=this.ca,n=this.cb,a=this.b;return"M ".concat(e.toSvg()," C ").concat(t.toSvg(),", ").concat(n.toSvg(),", ").concat(a.toSvg())}},{key:"toSvg",value:function(e,t,n){var a=this.a,o=this.ca,c=this.cb,i=this.b;a=t(a),o=t(o),c=t(c),i=t(i);var s=[];return n&&(s=s.concat([B("".concat(e,"ca"),o,"red"),G("".concat(e,"a-ca"),a,o),B("".concat(e,"cb"),c,"red"),G("".concat(e,"b-cb"),i,c),B("".concat(e,"a"),a,"green"),B("".concat(e,"b"),i,"green")])),s.concat([r.a.createElement("path",{key:e,d:"M ".concat(a.toSvg()," C ").concat(o.toSvg(),", ").concat(c.toSvg(),", ").concat(i.toSvg()),fill:"none",stroke:"blue"})])}}]),e}();function B(e,t,n){return r.a.createElement("circle",{key:e,cx:t.x,cy:t.y,r:3,fill:n})}function G(e,t,n){return r.a.createElement("path",{key:e,d:"M ".concat(t.x," ").concat(t.y," L ").concat(n.x," ").concat(n.y),stroke:"red",strokeDasharray:"3,3"})}function J(e,t,n,a,r,o){return function(c){o&&(c=L(c.x,-c.y)),r===O&&(c=L(c.y,c.x));var i=c.x*n+e,s=c.y*a+t;return new N(i,s)}}function U(e,t){var n=t/e;return function(e){return new N(e.x*n,t-e.y*n)}}var V=y;c.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,2,1]]]);
//# sourceMappingURL=main.edd3e04b.chunk.js.map