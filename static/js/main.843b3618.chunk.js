(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(42)},28:function(e,t,n){},39:function(e,t){},42:function(e,t,n){"use strict";n.r(t);n(22);var a=n(1),r=n.n(a),o=n(5),c=n.n(o),i=(n(28),n(10)),s=n.n(i),h=n(6),l=n(7),u=n(12),d=n(11),m=n(13),g=n(3),v=n(14),f=n.n(v),p=s.a.mark(S),b=s.a.mark(N),w=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={rngSeed:"seed for random number generation",showControlPoints:!1,width:297,height:210,pieces:100,mode:"puzzle"},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h2",null,"Jigsaw Puzzle Generator"),r.a.createElement("p",null,"Code available in ",r.a.createElement("a",{href:"https://github.com/stefanomasini/jigsaw-puzzle"},"GitHub")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},"puzzle"===this.state.mode&&r.a.createElement("div",null,r.a.createElement(k,{rngSeed:this.state.rngSeed,showControlPoints:this.state.showControlPoints,width:this.state.width,height:this.state.height,pieces:this.state.pieces}),r.a.createElement(g.a,{onClick:function(){return function(e){var t=e.width,n=e.height,a=e.pieces,r=e.rngSeed,o=y(t,n,a),c=Array.from(S(o,r)).map(function(e){return e.toSvgText()}).join("\n");!function(e,t,n){var a=document.createElement("a");a.setAttribute("href","data:".concat(n,";charset=utf-8,").concat(encodeURIComponent(t))),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("puzzle.svg","".concat(_,'\n                   <svg version="1.0" id="Layer_1" xmlns="http://www.w3.org/2000/svg" \n                        xmlns:xlink="http://www.w3.org/1999/xlink" x="0mm" y="0mm" width="').concat(t,'mm" height="').concat(n,'mm" \n                        viewBox="0 0 ').concat(t," ").concat(n,'" \n                        enable-background="new 0 0 ').concat(t," ").concat(n,'" \n                        xml:space="preserve">\n                       ').concat(c,"\n                   </svg>"),"image/svg+xml")}(e.state)}},"Download SVG")),"algorithm"===this.state.mode&&r.a.createElement(x,{rngSeed:this.state.rngSeed,showControlPoints:this.state.showControlPoints})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(g.b,null,r.a.createElement(g.c,null,r.a.createElement(g.e,{for:"rngSeed"},"RNG seed"),r.a.createElement(g.d,{type:"text",name:"rngSeed",id:"rngSeed",value:this.state.rngSeed,onChange:function(t){e.setState({rngSeed:t.target.value})}})),r.a.createElement(g.c,{tag:"fieldset"},r.a.createElement("legend",null,"Mode"),r.a.createElement(g.c,{check:!0},r.a.createElement(g.e,{check:!0},r.a.createElement(g.d,{type:"radio",name:"radio_puzzle",checked:"puzzle"===this.state.mode,onChange:function(){e.setState({mode:"puzzle",showControlPoints:!1})}})," ","Puzzle generation")),r.a.createElement(g.c,{check:!0},r.a.createElement(g.e,{check:!0},r.a.createElement(g.d,{type:"radio",name:"radio_tuning",checked:"algorithm"===this.state.mode,onChange:function(){e.setState({mode:"algorithm"})}})," ","Algorithm tuning"))),"puzzle"===this.state.mode&&r.a.createElement("div",null,r.a.createElement(g.c,null,r.a.createElement(g.e,{for:"width"},"Size (mm)"),r.a.createElement(g.d,{type:"text",name:"width",id:"width",value:this.state.width,onChange:function(t){e.setState({width:parseInt(t.target.value)})}}),r.a.createElement(g.d,{type:"text",name:"height",id:"height",value:this.state.height,onChange:function(t){e.setState({height:parseInt(t.target.value)})}})),r.a.createElement(g.c,null,r.a.createElement(g.e,{for:"pieces"},"Pieces"),r.a.createElement(g.d,{type:"text",name:"pieces",id:"pieces",value:this.state.pieces,onChange:function(t){e.setState({pieces:parseInt(t.target.value)})}}))),"algorithm"===this.state.mode&&r.a.createElement(g.c,{check:!0},r.a.createElement(g.e,{check:!0},r.a.createElement(g.d,{type:"checkbox",checked:this.state.showControlPoints,onChange:function(){e.setState({showControlPoints:!e.state.showControlPoints})}})," ","Show control points")),r.a.createElement(g.a,null,"Submit")))))}}]),t}(a.Component),k=function(e){function t(){return Object(h.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.width,n=this.props.height;if(0===t||0===n)return null;var a=500/t*n,o=B(n,a),c=y(t,n,this.props.pieces),i=Array.from(S(c,this.props.rngSeed));return r.a.createElement("div",null,r.a.createElement("svg",{width:500,height:a,style:{border:"0"}},i.map(function(t,n){return t.toSvg(n,o,e.props.showControlPoints)})),r.a.createElement("p",null,c.numRows," x ",c.numCols," = ",c.actualNumPieces," pieces"))}}]),t}(a.Component),x=function(e){function t(){return Object(h.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=B(1,500),n=f()(this.props.rngSeed),a=Array.from(z(n));return r.a.createElement("svg",{width:500,height:500,style:{border:"1px solid black"}},a.map(function(n,a){return n.toSvg(a,t,e.props.showControlPoints)}))}}]),t}(a.Component),_='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">\n';function y(e,t,n){var a=Math.sqrt(e*t/n),r=Math.round(e/a),o=e/r,c=Math.round(t/a);return{model_width:e,model_height:t,numCols:r,block_width:o,numRows:c,block_height:t/c,actualNumPieces:c*r}}function S(e,t){var n,a,r,o,c,i,h,l,u,d,m,g,v,b,w,k,x,_,y,S,j,O,P,M,N,L,A;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=e.numRows,a=e.numCols,r=e.block_width,o=e.block_height,c=e.model_width,i=e.model_height,h=f()(t),s.next=4,new D(0,0,c,i);case 4:l=1;case 5:if(!(l<n)){s.next=42;break}u=0;case 7:if(!(u<a)){s.next=39;break}d=h()>.5,m=I(r*u,o*l,r,o,E,d),g=!0,v=!1,b=void 0,s.prev=13,w=z(h)[Symbol.iterator]();case 15:if(g=(k=w.next()).done){s.next=22;break}return x=k.value,s.next=19,x.transform(m);case 19:g=!0,s.next=15;break;case 22:s.next=28;break;case 24:s.prev=24,s.t0=s.catch(13),v=!0,b=s.t0;case 28:s.prev=28,s.prev=29,g||null==w.return||w.return();case 31:if(s.prev=31,!v){s.next=34;break}throw b;case 34:return s.finish(31);case 35:return s.finish(28);case 36:u+=1,s.next=7;break;case 39:l+=1,s.next=5;break;case 42:_=1;case 43:if(!(_<a)){s.next=80;break}y=0;case 45:if(!(y<n)){s.next=77;break}S=h()>.5,j=I(r*_,o*y,r,o,C,S),O=!0,P=!1,M=void 0,s.prev=51,N=z(h)[Symbol.iterator]();case 53:if(O=(L=N.next()).done){s.next=60;break}return A=L.value,s.next=57,A.transform(j);case 57:O=!0,s.next=53;break;case 60:s.next=66;break;case 62:s.prev=62,s.t1=s.catch(51),P=!0,M=s.t1;case 66:s.prev=66,s.prev=67,O||null==N.return||N.return();case 69:if(s.prev=69,!P){s.next=72;break}throw M;case 72:return s.finish(69);case 73:return s.finish(66);case 74:y+=1,s.next=45;break;case 77:_+=1,s.next=43;break;case 80:case"end":return s.stop()}},p,this,[[13,24,28,36],[29,,31,35],[51,62,66,74],[67,,69,73]])}var E="h",C="v",j={base_height:O(.1,.03),tooth_base_middle:O(.5,.08),tooth_neck_width:O(.2,.04),tooth_left_width:O(.15,.03),tooth_right_width:O(.15,.03),tooth_height:O(.18,.04)};function O(e,t){return{value:e,variability:t}}function z(e){var t,n,a=function(e,t){for(var n={},a=Object.keys(e),r=0;r<a.length;r++){var o=a[r];n[o]=e[o].value+(2*t()-1)*e[o].variability}return n}(j,e),r=a.tooth_base_middle-a.tooth_neck_width/2,o=1-r-a.tooth_neck_width,c=a.tooth_base_middle-a.tooth_left_width,i=1-c-a.tooth_left_width-a.tooth_right_width,s=a.base_height+a.tooth_height,h=a.base_height+3*a.tooth_height/5,l=h-a.base_height,u=s-h;return N((t=P(0,0),n=P(1,0),{point:t,direction:n,length_after:r/2}),A(P(r,a.base_height),P(0,1),2*a.base_height/3,l/2),A(P(c,h),P(0,1),l/2,u/2),A(P(a.tooth_base_middle,s),P(1,0),a.tooth_left_width/2,a.tooth_right_width/2),A(P(1-i,h),P(0,-1),u/2,l/2),A(P(1-o,a.base_height),P(0,-1),l/2,2*a.base_height/3),function(e,t,n){return{point:e,direction:t,length_before:n}}(P(1,0),P(1,0),o/2))}function P(e,t){return new M(e,t)}var M=function(){function e(t,n){Object(h.a)(this,e),this.x=t,this.y=n}return Object(l.a)(e,[{key:"toSvg",value:function(){return"".concat(this.x," ").concat(this.y)}}]),e}();function N(e){var t,n,a,r,o,c,i=arguments;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:for(t=e,n=i.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=i[r];o=0;case 3:if(!(o<a.length)){s.next=11;break}return c=a[o],s.next=7,new R(t.point,L(t.point,t.direction,t.length_after),L(c.point,c.direction,-c.length_before),c.point);case 7:t=c;case 8:o++,s.next=3;break;case 11:case"end":return s.stop()}},b,this)}function L(e,t,n){var a=n/Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return P(e.x+t.x*a,e.y+t.y*a)}function A(e,t,n,a){return{point:e,direction:t,length_before:n,length_after:a}}var D=function(){function e(t,n,a,r){Object(h.a)(this,e),this.a=P(t,n),this.b=P(t+a,n),this.c=P(t+a,n+r),this.d=P(t,n+r)}return Object(l.a)(e,[{key:"toSvgText",value:function(){var e=this.a,t=this.b,n=this.c,a=this.d;return'<path d="M '.concat(e.toSvg()," L ").concat(t.toSvg()," L ").concat(n.toSvg()," L ").concat(a.toSvg(),' Z" fill="none" stroke="#000000" stroke-width="0.05pt"/>')}},{key:"toSvg",value:function(e,t,n){var a=this.a,o=this.b,c=this.c,i=this.d;return a=t(a),o=t(o),c=t(c),i=t(i),r.a.createElement("path",{key:e,d:"M ".concat(a.toSvg()," L ").concat(o.toSvg()," L ").concat(c.toSvg()," L ").concat(i.toSvg()," Z"),fill:"none",stroke:"black"})}}]),e}(),R=function(){function e(t,n,a,r){Object(h.a)(this,e),this.a=t,this.ca=n,this.cb=a,this.b=r}return Object(l.a)(e,[{key:"transform",value:function(t){return new e(t(this.a),t(this.ca),t(this.cb),t(this.b))}},{key:"toSvgText",value:function(){var e=this.a,t=this.ca,n=this.cb,a=this.b;return'<path d="M '.concat(e.toSvg()," C ").concat(t.toSvg(),", ").concat(n.toSvg(),", ").concat(a.toSvg(),'" fill="none" stroke="#000000" stroke-width="0.05pt"/>')}},{key:"toSvg",value:function(e,t,n){var a=this.a,o=this.ca,c=this.cb,i=this.b;a=t(a),o=t(o),c=t(c),i=t(i);var s=[];return n&&(s=s.concat([T("".concat(e,"ca"),o,"red"),G("".concat(e,"a-ca"),a,o),T("".concat(e,"cb"),c,"red"),G("".concat(e,"b-cb"),i,c),T("".concat(e,"a"),a,"green"),T("".concat(e,"b"),i,"green")])),s.concat([r.a.createElement("path",{key:e,d:"M ".concat(a.toSvg()," C ").concat(o.toSvg(),", ").concat(c.toSvg(),", ").concat(i.toSvg()),fill:"none",stroke:"blue"})])}}]),e}();function T(e,t,n){return r.a.createElement("circle",{key:e,cx:t.x,cy:t.y,r:3,fill:n})}function G(e,t,n){return r.a.createElement("path",{key:e,d:"M ".concat(t.x," ").concat(t.y," L ").concat(n.x," ").concat(n.y),stroke:"red",strokeDasharray:"3,3"})}function I(e,t,n,a,r,o){return function(c){o&&(c=P(c.x,-c.y)),r===C&&(c=P(c.y,c.x));var i=c.x*n+e,s=c.y*a+t;return new M(i,s)}}function B(e,t){var n=t/e;return function(e){return new M(e.x*n,t-e.y*n)}}var J=w;c.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.843b3618.chunk.js.map